<alg-section i18n-label label="Associated Activity" icon="fa fa-book">

  <p-progressSpinner *ngIf="state === 'fetching'"></p-progressSpinner>

  <p *ngIf="state === 'error'" class="error-message">
    <i class="fa fa-exclamation-triangle"></i>
    <span i18n>Error while loading the root activity</span>
  </p>

  <ng-container *ngIf="state === 'ready'">
    <ng-container [ngSwitch]="rootActivity.tag">

      <ng-container *ngSwitchCase="'no-activity'">
        <p>There are currently no activities associated with this group.</p>
        <alg-add-content
          [allowedTypesForNewContent]="allowedNewItemTypes"
          [searchFunction]="searchFunction"
          (contentAdded)="setRootActivity($event)"
        ></alg-add-content>
      </ng-container>

      <div class="activity" *ngSwitchCase="'new-activity'">
        <span class="activity-name">
          {{rootActivityData!.name}}
        </span>
        <span class="remove" (click)="onRemove()">
          <span i18n>Remove</span>
          <i class="fa fa-trash-alt"></i>
        </span>
      </div>

      <div class="activity" *ngSwitchCase="'existing-activity'">
        <i class="fa fa-lock" *ngIf="!rootActivityData?.path"></i>
        <span class="activity-name"
          [routerLink]="rootActivityData!.path"
          [ngClass]="{clickable: !!rootActivityData?.path}"
        >{{rootActivityData!.name}}</span>
        <span class="remove" (click)="onRemove()">
          <span i18n>Remove</span>
          <i class="fa fa-trash-alt"></i>
        </span>
      </div>

    </ng-container>
  </ng-container>
</alg-section>
