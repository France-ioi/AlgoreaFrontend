<ng-container *ngrxLet="isMessageCreatedByCurrentUser$; let isMessageCreatedByCurrentUser">
  <div
    class="message-container"
    [ngClass]="{
      'left': !isMessageCreatedByCurrentUser && event.label === 'message',
      'right': isMessageCreatedByCurrentUser && event.label === 'message',
      'full-width transparent': ['result_started', 'submission'].includes(event.label)
    }"
  >
    <div class="message">
      <div class="name" *ngIf="!isMessageCreatedByCurrentUser && event.label === 'message'">
        <strong>{{ event.createdBy }}</strong>
      </div>
      <div class="bubble">
        <ng-container *ngIf="event.label === 'message'">
          <div class="message-event">{{ event.data.content }}</div>
        </ng-container>
        <ng-container *ngIf="['result_started', 'submission'].includes(event.label)">
          <div class="classical-event">
            <span *ngIf="isMessageCreatedByCurrentUser; else anotherUser" i18n>
              You
            </span>
            <ng-template #anotherUser>
              {{ event.createdBy }}
            </ng-template>
            <span *ngIf="event.label === 'result_started'" i18n>started the activity</span>
            <ng-container *ngIf="event.label === 'submission'">
              <span i18n>submitted a solution</span>
              <span class="scored-text" *ngIf="event.data.score !== undefined" i18n>
                which scored <strong>{{ event.data.score }}</strong>
              </span>.
            </ng-container>
          </div>
          <div class="date">{{ event.time | date : 'short' }}</div>
        </ng-container>
      </div>
      <div class="date" *ngIf="event.label === 'message'" i18n>Sent at {{ event.time | date : 'short' }}</div>
    </div>
  </div>
</ng-container>
