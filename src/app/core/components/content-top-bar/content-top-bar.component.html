<alg-observation-bar *ngIf="!!(watchedGroup$ | async)"></alg-observation-bar>

<ng-container *ngIf="currentContent$ | async as currentContent">
  <ng-container *ngIf="!fullFrameContent?.active && !scrolled">
    <alg-breadcrumb [contentBreadcrumb]="currentContent?.breadcrumbs"></alg-breadcrumb>
  </ng-container>
  <div class="full-frame-content-top-bar" *ngIf="fullFrameContent?.active || scrolled">
    <button
      class="alg-button-icon no-bg primary-color left-menu margin-right"
      pButton
      type="button"
      icon="ph ph-list"
      (click)="unsetFullFrameContent()"
      *ngIf="fullFrameContent?.active"
    ></button>
    <div class="score-placeholder" *ngIf="currentContent.type === 'item'">
      <alg-score-ring
        *ngIf="$any(currentContent).details && $any(currentContent).details.bestScore !== undefined && $any(currentContent).details.currentScore !== undefined && $any(currentContent).details.validated !== undefined"
        [bestScore]="$any(currentContent).details.bestScore"
        [currentScore]="$any(currentContent).details.currentScore"
        [isValidated]="$any(currentContent).details.validated"
        [diameter]="32"
      ></alg-score-ring>
    </div>
    <div class="right-pane-title">
      <p *ngIf="currentContent && currentContent.title">{{ currentContent.title }}</p>
    </div>
    <button
      *ngIf="discussionState$ | async as discussion"
      class="alg-button-icon no-bg primary-color margin-left"
      [ngClass]="{ 'active': discussion.visible }"
      pButton
      type="button"
      icon="ph ph-chat-circle-dots"
      (click)="toggleThreadVisibility(!discussion.visible)"
    ></button>
    <alg-watch-button
      class="margin-left"
      *ngIf="currentContent.type === 'group' && !!$any(currentContent).details?.currentUserCanWatchMembers"
    ></alg-watch-button>
    <alg-neighbor-widget
      *ngIf="navigationNeighbors$ | async as navigationNeighbors"
      class="margin-left"
      [navigationMode]="{
        parent: !!navigationNeighbors?.isReady && !!navigationNeighbors?.data?.parent,
        left: !!navigationNeighbors?.isReady && !!navigationNeighbors?.data?.previous,
        right: !!navigationNeighbors?.isReady && !!navigationNeighbors?.data?.next
      }"
      (parent)="navigationNeighbors?.data?.parent?.navigateTo()"
      (left)="navigationNeighbors?.data?.previous?.navigateTo()"
      (right)="navigationNeighbors?.data?.next?.navigateTo()"
    ></alg-neighbor-widget>
  </div>
</ng-container>
